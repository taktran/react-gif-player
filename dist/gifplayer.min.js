(function webpackUniversalModuleDefinition(root,factory){if(typeof exports==="object"&&typeof module==="object")module.exports=factory(require("prop-types"),require("react"));else if(typeof define==="function"&&define.amd)define(["prop-types","react"],factory);else if(typeof exports==="object")exports["GifPlayer"]=factory(require("prop-types"),require("react"));else root["GifPlayer"]=factory(root["PropTypes"],root["React"])})(globalThis,(__WEBPACK_EXTERNAL_MODULE__189__,__WEBPACK_EXTERNAL_MODULE__899__)=>{return(()=>{var __webpack_modules__={184:(module,exports)=>{var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(){"use strict";var hasOwn={}.hasOwnProperty;function classNames(){var classes=[];for(var i=0;i<arguments.length;i++){var arg=arguments[i];if(!arg)continue;var argType=typeof arg;if(argType==="string"||argType==="number"){classes.push(arg)}else if(Array.isArray(arg)){classes.push(classNames.apply(null,arg))}else if(argType==="object"){for(var key in arg){if(hasOwn.call(arg,key)&&arg[key]){classes.push(key)}}}}return classes.join(" ")}if(true&&module.exports){module.exports=classNames}else if(true){!(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return classNames}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else{}})()},149:module=>{"use strict";function componentWillMount(){var state=this.constructor.getDerivedStateFromProps(this.props,this.state);if(state!==null&&state!==undefined){this.setState(state)}}function componentWillReceiveProps(nextProps){var state=this.constructor.getDerivedStateFromProps(nextProps,this.state);if(state!==null&&state!==undefined){this.setState(state)}}componentWillMount.__suppressDeprecationWarning=true;componentWillReceiveProps.__suppressDeprecationWarning=true;module.exports=function polyfill(Component){if(!Component.prototype||!Component.prototype.isReactComponent){throw new Error("Can only polyfill class components")}if(typeof Component.getDerivedStateFromProps==="function"){if(typeof Component.prototype.componentWillMount==="function"){throw new Error("Cannot polyfill if componentWillMount already exists")}else if(typeof Component.prototype.componentWillReceiveProps==="function"){throw new Error("Cannot polyfill if componentWillReceiveProps already exists")}Component.prototype.componentWillMount=componentWillMount;Component.prototype.componentWillReceiveProps=componentWillReceiveProps}return Component}},189:module=>{"use strict";module.exports=__WEBPACK_EXTERNAL_MODULE__189__},899:module=>{"use strict";module.exports=__WEBPACK_EXTERNAL_MODULE__899__}};var __webpack_module_cache__={};function __webpack_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(cachedModule!==undefined){return cachedModule.exports}var module=__webpack_module_cache__[moduleId]={exports:{}};__webpack_modules__[moduleId](module,module.exports,__webpack_require__);return module.exports}(()=>{__webpack_require__.n=module=>{var getter=module&&module.__esModule?()=>module["default"]:()=>module;__webpack_require__.d(getter,{a:getter});return getter}})();(()=>{__webpack_require__.d=(exports,definition)=>{for(var key in definition){if(__webpack_require__.o(definition,key)&&!__webpack_require__.o(exports,key)){Object.defineProperty(exports,key,{enumerable:true,get:definition[key]})}}}})();(()=>{__webpack_require__.o=(obj,prop)=>Object.prototype.hasOwnProperty.call(obj,prop)})();var __webpack_exports__={};(()=>{"use strict";__webpack_require__.d(__webpack_exports__,{default:()=>src});var external_root_React_commonjs_react_commonjs2_react_amd_react_=__webpack_require__(899);var external_root_React_commonjs_react_commonjs2_react_amd_react_default=__webpack_require__.n(external_root_React_commonjs_react_commonjs2_react_amd_react_);var external_root_PropTypes_commonjs_prop_types_commonjs2_prop_types_amd_prop_types_=__webpack_require__(189);var external_root_PropTypes_commonjs_prop_types_commonjs2_prop_types_amd_prop_types_default=__webpack_require__.n(external_root_PropTypes_commonjs_prop_types_commonjs2_prop_types_amd_prop_types_);var react_lifecycles_compat=__webpack_require__(149);var react_lifecycles_compat_default=__webpack_require__.n(react_lifecycles_compat);var classnames=__webpack_require__(184);var classnames_default=__webpack_require__.n(classnames);const _excluded=["gif","still","playing","toggle"];function _extends(){_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}const GifPlayer=_ref=>{let{gif,still,playing,toggle}=_ref,rest=_objectWithoutProperties(_ref,_excluded);return external_root_React_commonjs_react_commonjs2_react_amd_react_default().createElement("div",{className:classnames_default()("gif_player",{playing:playing}),onClick:toggle},external_root_React_commonjs_react_commonjs2_react_amd_react_default().createElement("div",{className:"play_button"}),external_root_React_commonjs_react_commonjs2_react_amd_react_default().createElement("img",_extends({},rest,{src:playing?gif||still:still||gif})))};GifPlayer.propTypes={gif:external_root_PropTypes_commonjs_prop_types_commonjs2_prop_types_amd_prop_types_default().string,still:external_root_PropTypes_commonjs_prop_types_commonjs2_prop_types_amd_prop_types_default().string,playing:external_root_PropTypes_commonjs_prop_types_commonjs2_prop_types_amd_prop_types_default().bool,toggle:external_root_PropTypes_commonjs_prop_types_commonjs2_prop_types_amd_prop_types_default().func};const src_GifPlayer=GifPlayer;const src_excluded=["autoplay","pauseRef","onTogglePlay"];function src_extends(){src_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return src_extends.apply(this,arguments)}function src_objectWithoutProperties(source,excluded){if(source==null)return{};var target=src_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function src_objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}const preload=(src,callback)=>{var img=new Image;if(typeof callback==="function"){img.onload=()=>callback(img);img.setAttribute("crossOrigin","anonymous")}img.src=src};const firstGifFrameUrl=img=>{const canvas=document.createElement("canvas");if(typeof canvas.getContext!=="function"){return null}canvas.width=img.width;canvas.height=img.height;const ctx=canvas.getContext("2d");ctx.drawImage(img,0,0);return canvas.toDataURL()};class GifPlayerContainer extends external_root_React_commonjs_react_commonjs2_react_amd_react_default().Component{static getDerivedStateFromProps(nextProps,prevState){const prevGif=prevState.providedGif;const nextGif=nextProps.gif;const prevStill=prevState.providedStill;const nextStill=nextProps.still;if(prevGif===nextGif&&prevStill===nextStill){return null}return{playing:nextGif&&nextProps.autoplay&&prevGif!==nextGif?true:prevState.playing,providedGif:nextGif,providedStill:nextStill,actualGif:nextGif,actualStill:nextStill||prevGif!==nextGif?nextStill:prevState.actualStill}}constructor(props){super(props);this.state={playing:Boolean(props.autoplay),providedGif:props.gif,providedStill:props.still,actualGif:props.gif,actualStill:props.still};this.updateId=-1}componentDidMount(){if(typeof this.props.pauseRef==="function"){this.props.pauseRef(()=>this.setState({playing:false}))}this.updateImages()}componentDidUpdate(prevProps,prevState){this.updateImages(prevState);const{onTogglePlay}=this.props;if(prevState.playing!==this.state.playing&&typeof onTogglePlay==="function"){onTogglePlay(this.state.playing)}}updateImages(prevState={}){const{providedGif,providedStill}=this.state;if(providedGif&&!providedStill&&providedGif!==prevState.providedGif){const updateId=++this.updateId;preload(providedGif,img=>{if(this.updateId===updateId){const actualStill=firstGifFrameUrl(img);if(actualStill){this.setState({actualStill:actualStill})}}})}}toggle(){this.setState({playing:!this.state.playing})}render(){const _this$props=this.props,{autoplay,pauseRef,onTogglePlay}=_this$props,rest=src_objectWithoutProperties(_this$props,src_excluded);const{actualGif,actualStill,playing}=this.state;return external_root_React_commonjs_react_commonjs2_react_amd_react_default().createElement(src_GifPlayer,src_extends({},rest,{gif:actualGif,still:actualStill,playing:playing,toggle:()=>this.toggle()}))}}react_lifecycles_compat_default()(GifPlayerContainer);GifPlayerContainer.propTypes={gif:external_root_PropTypes_commonjs_prop_types_commonjs2_prop_types_amd_prop_types_default().string,still:external_root_PropTypes_commonjs_prop_types_commonjs2_prop_types_amd_prop_types_default().string,autoplay:external_root_PropTypes_commonjs_prop_types_commonjs2_prop_types_amd_prop_types_default().bool,pauseRef:external_root_PropTypes_commonjs_prop_types_commonjs2_prop_types_amd_prop_types_default().func,onTogglePlay:external_root_PropTypes_commonjs_prop_types_commonjs2_prop_types_amd_prop_types_default().func};const src=GifPlayerContainer})();__webpack_exports__=__webpack_exports__["default"];return __webpack_exports__})()});